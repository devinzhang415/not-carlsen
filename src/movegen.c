#include <stdint.h>
#include "movegen.h"
#include "util.h"
#include "board.h"


const uint64_t BB_KNIGHT_ATTACKS[64] = {
    0x20400, 0x50800, 0xa1100, 0x142200, 0x284400,
    0x508800, 0xa01000, 0x402000, 0x2040004, 0x5080008,
    0xa110011, 0x14220022, 0x28440044, 0x50880088, 0xa0100010,
    0x40200020, 0x204000402, 0x508000805, 0xa1100110a, 0x1422002214,
    0x2844004428, 0x5088008850, 0xa0100010a0, 0x4020002040, 0x20400040200,
    0x50800080500, 0xa1100110a00, 0x142200221400, 0x284400442800, 0x508800885000,
    0xa0100010a000, 0x402000204000, 0x2040004020000, 0x5080008050000, 0xa1100110a0000,
    0x14220022140000, 0x28440044280000, 0x50880088500000, 0xa0100010a00000, 0x40200020400000,
    0x204000402000000, 0x508000805000000, 0xa1100110a000000, 0x1422002214000000, 0x2844004428000000,
    0x5088008850000000, 0xa0100010a0000000, 0x4020002040000000, 0x400040200000000, 0x800080500000000,
    0x1100110a00000000, 0x2200221400000000, 0x4400442800000000, 0x8800885000000000, 0x100010a000000000,
    0x2000204000000000, 0x4020000000000, 0x8050000000000, 0x110a0000000000, 0x22140000000000,
    0x44280000000000, 0x88500000000000, 0x10a00000000000, 0x20400000000000
};

uint64_t BB_BISHOP_ATTACKS[64][512];

uint64_t BB_ROOK_ATTACKS[64][4096];

const uint64_t BB_KING_ATTACKS[64] = {
    0x20400, 0x50800, 0xa1100, 0x142200, 0x284400,
    0x508800, 0xa01000, 0x402000, 0x2040004, 0x5080008,
    0xa110011, 0x14220022, 0x28440044, 0x50880088, 0xa0100010,
    0x40200020, 0x204000402, 0x508000805, 0xa1100110a, 0x1422002214,
    0x2844004428, 0x5088008850, 0xa0100010a0, 0x4020002040, 0x20400040200,
    0x50800080500, 0xa1100110a00, 0x142200221400, 0x284400442800, 0x508800885000,
    0xa0100010a000, 0x402000204000, 0x2040004020000, 0x5080008050000, 0xa1100110a0000,
    0x14220022140000, 0x28440044280000, 0x50880088500000, 0xa0100010a00000, 0x40200020400000,
    0x204000402000000, 0x508000805000000, 0xa1100110a000000, 0x1422002214000000, 0x2844004428000000,
    0x5088008850000000, 0xa0100010a0000000, 0x4020002040000000, 0x400040200000000, 0x800080500000000,
    0x1100110a00000000, 0x2200221400000000, 0x4400442800000000, 0x8800885000000000, 0x100010a000000000,
    0x2000204000000000, 0x4020000000000, 0x8050000000000, 0x110a0000000000, 0x22140000000000,
    0x44280000000000, 0x88500000000000, 0x10a00000000000, 0x20400000000000
};


// Rook and bishop attack masks and magic numbers to generate their magic bitboards
const uint64_t BB_BISHOP_ATTACK_MASKS[64] = {
    0x8040201008040200, 0x80402010080500, 0x804020110a00, 0x8041221400, 0x182442800,
    0x10204885000, 0x102040810a000, 0x102040810204000, 0x4020100804020002, 0x8040201008050005,
    0x804020110a000a, 0x804122140014, 0x18244280028, 0x1020488500050, 0x102040810a000a0,
    0x204081020400040, 0x2010080402000204, 0x4020100805000508, 0x804020110a000a11, 0x80412214001422,
    0x1824428002844, 0x102048850005088, 0x2040810a000a010, 0x408102040004020, 0x1008040200020408,
    0x2010080500050810, 0x4020110a000a1120, 0x8041221400142241, 0x182442800284482, 0x204885000508804,
    0x40810a000a01008, 0x810204000402010, 0x804020002040810, 0x1008050005081020, 0x20110a000a112040,
    0x4122140014224180, 0x8244280028448201, 0x488500050880402, 0x810a000a0100804, 0x1020400040201008,
    0x402000204081020, 0x805000508102040, 0x110a000a11204080, 0x2214001422418000, 0x4428002844820100,
    0x8850005088040201, 0x10a000a010080402, 0x2040004020100804, 0x200020408102040, 0x500050810204080,
    0xa000a1120408000, 0x1400142241800000, 0x2800284482010000, 0x5000508804020100, 0xa000a01008040201,
    0x4000402010080402, 0x2040810204080, 0x5081020408000, 0xa112040800000, 0x14224180000000,
    0x28448201000000, 0x50880402010000, 0xa0100804020100, 0x40201008040201
};

const uint64_t BB_ROOK_ATTACK_MASKS[64] = {
    0x1010101010101fe, 0x2020202020202fd, 0x4040404040404fb, 0x8080808080808f7, 0x10101010101010ef,
    0x20202020202020df, 0x40404040404040bf, 0x808080808080807f, 0x10101010101fe01, 0x20202020202fd02,
    0x40404040404fb04, 0x80808080808f708, 0x101010101010ef10, 0x202020202020df20, 0x404040404040bf40,
    0x8080808080807f80, 0x101010101fe0101, 0x202020202fd0202, 0x404040404fb0404, 0x808080808f70808,
    0x1010101010ef1010, 0x2020202020df2020, 0x4040404040bf4040, 0x80808080807f8080, 0x1010101fe010101,
    0x2020202fd020202, 0x4040404fb040404, 0x8080808f7080808, 0x10101010ef101010, 0x20202020df202020,
    0x40404040bf404040, 0x808080807f808080, 0x10101fe01010101, 0x20202fd02020202, 0x40404fb04040404,
    0x80808f708080808, 0x101010ef10101010, 0x202020df20202020, 0x404040bf40404040, 0x8080807f80808080,
    0x101fe0101010101, 0x202fd0202020202, 0x404fb0404040404, 0x808f70808080808, 0x1010ef1010101010,
    0x2020df2020202020, 0x4040bf4040404040, 0x80807f8080808080, 0x1fe010101010101, 0x2fd020202020202,
    0x4fb040404040404, 0x8f7080808080808, 0x10ef101010101010, 0x20df202020202020, 0x40bf404040404040,
    0x807f808080808080, 0xfe01010101010101, 0xfd02020202020202, 0xfb04040404040404, 0xf708080808080808,
    0xef10101010101010, 0xdf20202020202020, 0xbf40404040404040, 0x7f80808080808080
};

const uint64_t BISHOP_MAGICS[64] = {
	0x2020202020200, 0x2020202020000, 0x4010202000000, 0x4040080000000, 0x1104000000000,
    0x821040000000, 0x410410400000, 0x104104104000, 0x40404040400, 0x20202020200,
    0x40102020000, 0x40400800000, 0x11040000000, 0x8210400000, 0x4104104000,
    0x2082082000, 0x4000808080800, 0x2000404040400, 0x1000202020200, 0x800802004000,
	0x800400a00000, 0x200100884000, 0x400082082000, 0x200041041000, 0x2080010101000,
    0x1040008080800, 0x208004010400, 0x404004010200, 0x840000802000, 0x404002011000,
    0x808001041000, 0x404000820800, 0x1041000202000, 0x820800101000, 0x104400080800,
    0x20080080080, 0x404040040100, 0x808100020100, 0x1010100020800, 0x808080010400,
	0x820820004000, 0x410410002000, 0x82088001000, 0x2011000800, 0x80100400400,
    0x1010101000200, 0x2020202000400, 0x1010101000200, 0x410410400000, 0x208208200000,
    0x2084100000, 0x20880000, 0x1002020000, 0x40408020000, 0x4040404040000,
    0x2020202020000, 0x104104104000, 0x2082082000, 0x20841000, 0x208800,
	0x10020200, 0x404080200, 0x40404040400, 0x2020202020200
};

const uint64_t ROOK_MAGICS[64] = {
	0x80001020400080, 0x40001000200040, 0x80081000200080, 0x80040800100080, 0x80020400080080,
    0x80010200040080, 0x80008001000200, 0x80002040800100, 0x800020400080, 0x400020005000,
    0x801000200080, 0x800800100080, 0x800400080080, 0x800200040080, 0x800100020080,
    0x800040800100, 0x208000400080, 0x404000201000, 0x808010002000, 0x808008001000,
	0x808004000800, 0x808002000400, 0x10100020004, 0x20000408104, 0x208080004000,
    0x200040005000, 0x100080200080, 0x80080100080, 0x40080080080, 0x20080040080,
    0x10080800200, 0x800080004100, 0x204000800080, 0x200040401000, 0x100080802000,
    0x80080801000, 0x40080800800, 0x20080800400, 0x20001010004, 0x800040800100,
	0x204000808000, 0x200040008080, 0x100020008080, 0x80010008080, 0x40008008080,
    0x20004008080, 0x10002008080, 0x4081020004, 0x204000800080, 0x200040008080,
    0x100020008080, 0x80010008080, 0x40008008080, 0x20004008080, 0x800100020080,
    0x800041000080, 0xfffcddfced714a, 0x7ffcddfced714a, 0x3fffcdffd88096, 0x40810002101,
	0x1000204080011, 0x1000204000801, 0x1000082000401, 0x1fffaabfad1a2
};
